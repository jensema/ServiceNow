<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>public</access>
        <active>true</active>
        <api_name>x_dehp_time_track.DynamicFilters</api_name>
        <client_callable>true</client_callable>
        <description/>
        <name>DynamicFilters</name>
        <script><![CDATA[var DynamicFilters = Class.create();

DynamicFilters.myTasks = function(userID) {
	var tasks = [];
	var taskIDs = [];
	var arrayUtil = new global.ArrayUtil();
	var json = new global.JSON();
	var parentAccounts = new GlideRecord('x_dehp_time_track_accounts');
	parentAccounts.addQuery('active=true^parent=NULL');
	parentAccounts.query();
	
	while(parentAccounts.next()) {
		account = new Account(parentAccounts);
		tasks = tasks.concat(account.getCategories(userID, true, false));
	}
	
	tasks.forEach(function(task) {
	  taskIDs.push(task.sys_id);
	});
	
	return taskIDs;
};

DynamicFilters.UnsubmittedApprovals = function () {
	var pending_ids  = TimeUtils.getMyApprovalSheets('Pending');
	var rejected_ids = TimeUtils.getMyApprovalSheets('Rejected');
	var arrayUtil = new global.ArrayUtil();
	var sys_ids = arrayUtil.union(pending_ids, rejected_ids);
	return sys_ids;
};

DynamicFilters.myApprovalsByState = function (state) {
	var sys_ids = TimeUtils.getMyApprovalSheets(state);
	return sys_ids;
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>_ejense</sys_created_by>
        <sys_created_on>2019-01-30 21:04:05</sys_created_on>
        <sys_id>aad9ad021b93e7406d740d03cd4bcb84</sys_id>
        <sys_mod_count>16</sys_mod_count>
        <sys_name>DynamicFilters</sys_name>
        <sys_package display_value="Time Tracking" source="x_dehp_time_track">fd7546c9db82eb00aa0f71043996190b</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Time Tracking">fd7546c9db82eb00aa0f71043996190b</sys_scope>
        <sys_update_name>sys_script_include_aad9ad021b93e7406d740d03cd4bcb84</sys_update_name>
        <sys_updated_by>_ejense</sys_updated_by>
        <sys_updated_on>2019-01-31 21:14:05</sys_updated_on>
    </sys_script_include>
</record_update>
